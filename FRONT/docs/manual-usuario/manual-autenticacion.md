# Autenticación y Registro en EcoVertical

Esta guía explica cómo iniciar sesión, crear una cuenta y las dos formas de registro:
- Registro como **Administrador** (crea una nueva ubicación/huerto base).
- Registro como **Residente** usando un **código de administrador** (te une a una ubicación ya creada por tu administrador).

---

## 1) ¿Dónde encuentro el acceso?
Desde la página de inicio:
- Pulsa **Iniciar Sesión** si ya tienes cuenta.
- Pulsa **Registrarse** si es tu primera vez.

También puedes entrar directamente a la pantalla combinada de autenticación en `Iniciar Sesión`/`Registrarse` dentro de la misma página.

---

## 2) Iniciar Sesión
1. En la pestaña **Iniciar Sesión**, escribe tu **correo** y **contraseña**.
2. Opcional: marca **Recordarme** para mantener la sesión abierta en este navegador.
3. Pulsa **Iniciar Sesión**.
4. Si las credenciales son correctas, irás a **Escoger Huerto**.
5. ¿Olvidaste tu contraseña? Usa el enlace **¿Olvidaste tu contraseña?** para recuperarla.

Consejos:
- La contraseña debe tener al menos 6 caracteres.
- Si cambia tu plan o permisos, es posible que necesites volver a iniciar sesión.

---

## 3) Registrarse: dos caminos
Al pulsar la pestaña **Registrarse**, verás un formulario en 3 pasos:

- Paso 1: **Información personal** (nombre, cédula, teléfono).
- Paso 2: **Dirección/ubicación** (calle, ciudad, estado, país).
- Paso 3: **Acceso** (correo, contraseña) y una decisión clave:
  - Activar el interruptor **“Quiero ser administrador”**.
  - O dejarlo apagado para registrarte como **residente con código de invitación**.

La app valida automáticamente:
- Si la **cédula** ya existe en el sistema.
- Si el **código de invitación** es válido y no está expirado (cuando aplique).

---

## 3.1) Registro como Administrador
El rol administrador crea una nueva **ubicación** (sede/condominio/propiedad) y podrá invitar a otros usuarios.

Pasos:
1. Completa los 3 pasos del formulario.
2. En el Paso 3, activa **“Quiero ser administrador”**.
3. No necesitas código de invitación.
4. Pulsa **Registrarme**.
5. Entrarás a tu cuenta y luego podrás generar códigos de invitación para tu equipo o residentes.

Qué implica ser administrador:
- Podrás generar un **código de invitación** asociado a tu ubicación.
- Controlarás usuarios y accesos de tu ubicación.
- Tendrás acceso a herramientas de gestión del huerto.

---

## 3.2) Registro con Código de Administrador (Residente)
Este modo es para unirte a una ubicación creada por tu administrador.

Qué necesitas:
- Un **código de 6 caracteres** que te entrega tu administrador.

Pasos:
1. Completa los 3 pasos del formulario.
2. En el Paso 3, deja apagado **“Quiero ser administrador”**.
3. Ingresa el **código de invitación** (la app lo valida automáticamente):
   - Si es válido, verás un estado de validación en verde.
   - Si es inválido o expiró, aparecerá un mensaje de error.
4. Pulsa **Registrarme**.

Notas importantes:
- El código puede usarse por varias personas mientras esté **activo** y **no haya expirado**.
- Si recibes error de expiración o código inválido, solicita uno nuevo a tu administrador.

---

## 4) ¿Cómo obtiene el administrador el código para invitar?
Una vez dentro, el administrador puede generar y compartir códigos desde su área de administración. El sistema:
- Verifica que quien lo solicita sea **administrador**.
- Asocia el código a la **ubicación** del administrador.
- Permite **desactivar** el código anterior y emitir uno nuevo.
- Define una **fecha de expiración** (por defecto, 7 días).

Buenas prácticas al compartir el código:
- Envíalo por un canal confiable a tus residentes/colaboradores.
- Recuérdales que el código tiene **6 caracteres** y **expira**.

---

## 5) Errores comunes y cómo resolverlos
- “El email ya está registrado”: usa **Iniciar Sesión** o recupera la contraseña.
- “La cédula ya está registrada”: verifica que no te hayas registrado antes.
- “Código de invitación no válido/expirado”: solicita uno nuevo al administrador.
- Contraseña corta: crea una contraseña de **mínimo 6 caracteres**.

---

## 6) Después de entrar
- Al iniciar sesión o terminar el registro exitosamente, irás a **Escoger Huerto** para comenzar a trabajar.
- Desde tu **Perfil** podrás ver tus datos y, si eres administrador, gestionar tu equipo.

Listo. Con esto ya puedes autenticarse y registrar usuarios correctamente en EcoVertical.
