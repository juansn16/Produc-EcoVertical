# Comentarios del Huerto

Esta secciÃ³n te permite registrar actividades y conversar sobre un huerto especÃ­fico. AquÃ­ aprenderÃ¡s a:
- Agregar comentarios y registrar actividades.
- Conocer los tipos de comentarios disponibles.
- Usar los filtros y la paginaciÃ³n.
- Asignar y gestionar residentes del huerto (solo administradores) y entender sus permisos.
- Cambiar la imagen del huerto.

---

## 1) Agregar un comentario o actividad
1. En la parte superior izquierda verÃ¡s el nombre del huerto y el botÃ³n **â€œAgregar Comentarioâ€**. TambiÃ©n puede aparecer cuando no hay comentarios (botÃ³n â€œAgregar Primer Comentarioâ€).
2. Se abrirÃ¡ un formulario con:
   - **Comentario**: escribe la descripciÃ³n en texto libre.
   - **Tipo de Actividad**: selecciona quÃ© tipo de comentario crear.
   - Campos adicionales que cambian segÃºn el tipo elegido.
3. Pulsa **Publicar** para guardar.

Si no ves el botÃ³n, probablemente no tienes permisos para crear comentarios (ver secciÃ³n Permisos).

---

## 2) Tipos de comentarios y campos
Al elegir el **Tipo de Actividad** puedes registrar datos especÃ­ficos:

- **ğŸ“ General**: solo texto libre.
- **ğŸ’§ Riego**:
  - Cantidad de agua y unidad (mL o L).
- **ğŸŒ± Siembra**:
  - Nombre de la siembra (opcional, texto).
  - NÃºmero de plantas sembradas.
- **âœ‚ï¸ Cosecha**:
  - Seleccionar la siembra cosechada (debe existir una siembra previa).
  - ProducciÃ³n cosechada (cantidad).
- **ğŸƒ Abono**:
  - Cantidad de abono y unidad (kg o g).
  - Â¿Se cambiÃ³ la tierra? (sÃ­/por encima).
- **ğŸ› Plagas**:
  - Especie de plaga (texto).
  - Nivel de infestaciÃ³n (pocos/medio/muchos).
- **ğŸ”§ Mantenimiento**:
  - Tiempo de mantenimiento y unidad (minutos/horas).

AdemÃ¡s, para todos los tipos excepto â€œGeneralâ€, â€œSiembraâ€ y â€œCosechaâ€, puedes relacionar el comentario con una siembra mediante â€œHuerto de:â€ (selecciona una siembra existente).

---

## 3) Ver, editar y eliminar
- Al abrir un comentario podrÃ¡s ver sus detalles. Si tienes permisos, verÃ¡s acciones para **Editar** o **Eliminar**.
- Los administradores y tÃ©cnicos pueden editar/eliminar cualquier comentario.
- Los residentes asignados solo pueden editar/eliminar sus propios comentarios.

---

## 4) Filtros de comentarios y bÃºsqueda
Arriba de la lista verÃ¡s controles de bÃºsqueda y filtros:
- **Buscar**: escribe texto para filtrar por contenido o autor.
- **CategorÃ­as**: botones como â€œTodosâ€, â€œGeneralâ€, â€œRiegoâ€, â€œSiembraâ€, etc. Selecciona uno para ver solo ese tipo.
- La lista estÃ¡ **paginada**; usa los botones â€œAnterior/Siguienteâ€ o los nÃºmeros de pÃ¡gina para navegar.

---

## 5) AsignaciÃ³n de residentes y permisos
La asignaciÃ³n de residentes define quiÃ©n puede participar activamente en el huerto.

### 5.1 Â¿QuiÃ©n puede asignar?
- Solo los **Administradores** verÃ¡n el panel â€œGestionar Residentesâ€ dentro de la pÃ¡gina del huerto.
- Desde ahÃ­ pueden **Asignar** o **Eliminar** residentes del huerto.

### 5.2 Permisos por rol
- **Administrador**: ver/crear/editar/eliminar comentarios; gestionar residentes; cambiar imagen.
- **TÃ©cnico**: ver/crear/editar/eliminar comentarios.
- **Residente asignado**: ver comentarios; crear, editar y eliminar los suyos; puede darse de baja del huerto.
- **Residente no asignado**: solo ver comentarios (no puede crear/editar/eliminar).

Nota: Al darse de baja, el residente deja de poder crear/editar/eliminar pero aÃºn puede ver, y puede ser reasignado mÃ¡s tarde por un administrador.

---

## 6) Darse de baja del huerto (solo residentes asignados)
- Usa el botÃ³n **â€œDarse de bajaâ€**. AparecerÃ¡ una confirmaciÃ³n con las consecuencias.
- Tras confirmar, perderÃ¡s los permisos de creaciÃ³n/ediciÃ³n/eliminaciÃ³n en ese huerto, pero seguirÃ¡s viendo sus comentarios.

---

## 7) Cambiar la imagen del huerto
1. En el encabezado del huerto verÃ¡s una tarjeta con la imagen. Pulsa **Cambiar imagen**.
2. Ingresa una **URL de imagen** vÃ¡lida. VerÃ¡s una **vista previa**.
3. Pulsa **Actualizar Imagen**. La imagen se guardarÃ¡ en el sistema y se mostrarÃ¡ en el encabezado.

Sugerencias:
- Usa una URL estable (por ejemplo, un enlace pÃºblico a una imagen en un servicio confiable).
- Si la imagen falla, se mostrarÃ¡ una imagen de respaldo.

---

## 8) Consejos y resoluciÃ³n de problemas
- No veo el botÃ³n â€œAgregar Comentarioâ€: verifica tus **permisos** o solicita asignaciÃ³n al administrador.
- No aparece mi siembra en â€œCosechado deâ€ o â€œHuerto deâ€: primero crea un comentario de **Siembra** en este huerto.
- Error al actualizar imagen: confirma que la **URL** es vÃ¡lida y accesible pÃºblicamente.
- No puedo eliminar un comentario: asegÃºrate de ser **autor** o tener rol **tÃ©cnico/administrador**.

Con esto podrÃ¡s registrar actividades, colaborar y gestionar permisos en la secciÃ³n de comentarios del huerto.
